<!DOCTYPE html>

<html class="dark" lang="en"><head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Music Generation Dashboard</title>
<!-- Fonts -->
<link href="https://fonts.googleapis.com" rel="preconnect"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:wght,FILL@100..700,0..1&display=swap" rel="stylesheet"/>
<!-- Tailwind CSS -->
<script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
<!-- Tailwind Config -->
<script>
      tailwind.config = {
        darkMode: "class",
        theme: {
          extend: {
            colors: {
              "primary": "#f20df2",
              "primary-dark": "#c20ac2",
              "background-light": "#f8f5f8",
              "background-dark": "#181118",
              "surface-dark": "#271b27",
              "border-dark": "#392839",
            },
            fontFamily: {
              "display": ["Space Grotesk", "sans-serif"],
              "body": ["Space Grotesk", "sans-serif"],
            },
            borderRadius: {
              "DEFAULT": "0.5rem",
              "lg": "0.75rem",
              "xl": "1rem",
              "full": "9999px"
            },
            animation: {
              "slide-in": "slideIn 0.3s ease-out",
              "fade-in": "fadeIn 0.5s ease-out",
            },
            keyframes: {
              slideIn: {
                from: { opacity: 0, transform: "translateY(-10px)" },
                to: { opacity: 1, transform: "translateY(0)" }
              },
              fadeIn: {
                from: { opacity: 0 },
                to: { opacity: 1 }
              }
            }
          },
        },
      }
    </script>
<!-- Custom CSS -->
<link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet"/>
</head>
<body class="bg-background-light dark:bg-background-dark text-slate-900 dark:text-white font-display antialiased selection:bg-primary selection:text-white overflow-hidden">
<div class="flex h-screen w-full">
{% include "partials/_sidebar.html" %}
<!-- Main Content -->
<main class="flex-1 flex flex-col min-w-0 bg-background-light dark:bg-background-dark relative overflow-hidden">
<!-- Header -->
<header class="flex items-center justify-between border-b border-border-dark px-6 py-3 bg-background-light/50 dark:bg-background-dark/50 backdrop-blur-md sticky top-0 z-10">
<div class="flex items-center gap-4 text-white md:hidden">
<button id="mobileMenuBtn" class="text-slate-400 hover:text-white">
<span class="material-symbols-outlined">menu</span>
</button>
<h2 class="text-lg font-bold">Create</h2>
</div>
<div class="hidden md:block">
<h2 class="text-slate-900 dark:text-white text-lg font-bold tracking-tight">Studio Dashboard</h2>
</div>
<div class="flex items-center gap-4">
  <div class="flex items-center bg-surface-dark rounded-full px-3 py-1.5 border border-border-dark">
    <span class="material-symbols-outlined text-primary text-sm mr-2">bolt</span>
    <span class="text-white text-xs font-bold font-mono">
      {% if current_user.is_authenticated %}
      500 CREDITS
      {% else %}
      0 CREDITS
      {% endif %}
    </span>
  </div>
  {% if current_user.is_authenticated %}
  <a href="{{ url_for('auth.profile') }}" class="p-2 text-slate-400 hover:text-white relative" title="Profile">
    <span class="material-symbols-outlined">account_circle</span>
  </a>
  {% endif %}
  <button class="p-2 text-slate-400 hover:text-white relative">
    <span class="material-symbols-outlined">notifications</span>
    <span class="absolute top-2 right-2 w-2 h-2 bg-primary rounded-full border-2 border-background-dark"></span>
  </button>
</div>
</header>
<!-- Scrollable Content -->
<div class="flex-1 overflow-y-auto custom-scrollbar p-6 pb-32">
<div class="max-w-7xl mx-auto space-y-8">
<!-- Unified Activity Dashboard -->
<section class="flex flex-col gap-6">
<div class="flex flex-col gap-2">
<h2 class="text-3xl md:text-4xl font-bold dark:text-white text-slate-900 tracking-tight">Activity Dashboard</h2>
<p class="text-slate-500 dark:text-slate-400">Track your recent music generation activities and template usage.</p>
</div>

<!-- Activity Feed -->
<div class="bg-white dark:bg-surface-dark rounded-xl border border-slate-200 dark:border-border-dark p-6 shadow-lg">
<div class="flex items-center justify-between mb-6">
<div>
<h3 class="text-xl font-bold dark:text-white text-slate-900">Recent Activities</h3>
<p class="text-sm text-slate-500 dark:text-slate-400">Your music generation history and template applications</p>
</div>
<div class="flex items-center gap-3">
<button id="activityRefreshBtn" class="flex items-center gap-2 px-3 py-2 rounded-lg bg-primary/10 text-primary hover:bg-primary/20 transition-colors">
<span class="material-symbols-outlined text-sm">refresh</span>
<span class="text-sm font-medium">Refresh</span>
</button>
<select id="activityFilter" class="bg-surface-dark border border-border-dark rounded-lg px-3 py-2 text-sm text-white focus:outline-none focus:ring-2 focus:ring-primary">
<option value="all">All Activities</option>
<option value="templates">Template Usage</option>
<option value="covers">Cover Generations</option>
<option value="today">Today Only</option>
</select>
</div>
</div>

<!-- Activity Stats -->
<div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-6">
<div class="bg-slate-50 dark:bg-slate-800 rounded-lg p-4">
<div class="flex items-center justify-between">
<div>
<p class="text-sm text-slate-500 dark:text-slate-400">Total Activities</p>
<p id="statsTotal" class="text-2xl font-bold dark:text-white text-slate-900">0</p>
</div>
<span class="material-symbols-outlined text-primary text-2xl">timeline</span>
</div>
</div>
<div class="bg-slate-50 dark:bg-slate-800 rounded-lg p-4">
<div class="flex items-center justify-between">
<div>
<p class="text-sm text-slate-500 dark:text-slate-400">Today</p>
<p id="statsToday" class="text-2xl font-bold dark:text-white text-slate-900">0</p>
</div>
<span class="material-symbols-outlined text-green-500 text-2xl">today</span>
</div>
</div>
<div class="bg-slate-50 dark:bg-slate-800 rounded-lg p-4">
<div class="flex items-center justify-between">
<div>
<p class="text-sm text-slate-500 dark:text-slate-400">Templates Used</p>
<p id="statsTemplates" class="text-2xl font-bold dark:text-white text-slate-900">0</p>
</div>
<span class="material-symbols-outlined text-blue-500 text-2xl">content_copy</span>
</div>
</div>
<div class="bg-slate-50 dark:bg-slate-800 rounded-lg p-4">
<div class="flex items-center justify-between">
<div>
<p class="text-sm text-slate-500 dark:text-slate-400">Successful</p>
<p id="statsSuccess" class="text-2xl font-bold dark:text-white text-slate-900">0</p>
</div>
<span class="material-symbols-outlined text-green-500 text-2xl">check_circle</span>
</div>
</div>
</div>

<!-- Activity Feed Container -->
<div id="activityLoading" class="text-center py-8">
<div class="inline-flex items-center gap-2 text-slate-500 dark:text-slate-400">
<span class="material-symbols-outlined animate-spin">sync</span>
<span>Loading activities...</span>
</div>
</div>

<div id="activityEmpty" class="text-center py-8 hidden">
<div class="flex flex-col items-center gap-3">
<span class="material-symbols-outlined text-slate-400 text-4xl">notifications_off</span>
<h4 class="text-lg font-medium text-slate-700 dark:text-slate-300">No activities yet</h4>
<p class="text-slate-500 dark:text-slate-400">Your music generation activities will appear here.</p>
</div>
</div>

<div id="activityError" class="text-center py-8 hidden">
<div class="flex flex-col items-center gap-3">
<span class="material-symbols-outlined text-red-500 text-4xl">error</span>
<h4 class="text-lg font-medium text-slate-700 dark:text-slate-300">Failed to load activities</h4>
<p class="text-slate-500 dark:text-slate-400 error-message"></p>
<button class="mt-2 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors">
Try Again
</button>
</div>
</div>

<div id="activityFeedContainer" class="space-y-4 max-h-[400px] overflow-y-auto custom-scrollbar hidden">
<!-- Activity cards will be inserted here by JavaScript -->
</div>

<div class="mt-4 pt-4 border-t border-slate-100 dark:border-border-dark">
<div class="flex items-center justify-between">
<div class="text-sm text-slate-500 dark:text-slate-400">
<span id="activityCount">0</span> activities loaded
</div>
<input id="activitySearch" type="text" placeholder="Search activities..." class="bg-surface-dark border border-border-dark rounded-lg px-3 py-2 text-sm text-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-primary w-64"/>
</div>
</div>
</div>
</section>

<!-- JavaScript Includes -->
<script src="{{ url_for('static', filename='js/components/activityFeed.js') }}"></script>
<script src="{{ url_for('static', filename='js/sidebar.js') }}"></script>
<script src="{{ url_for('static', filename='js/enhanced-dashboard.js') }}"></script>

</div>
</div>
</main>
</div>
</body>
</html>